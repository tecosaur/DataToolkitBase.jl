<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Data Transduction · DataSets.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../introduction/">DataSets.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../introduction/">Introduction</a></li><li><a class="tocitem" href="../repl/">REPL</a></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../libpublic/">Public</a></li><li class="is-active"><a class="tocitem" href>Data Transduction</a><ul class="internal"><li><a class="tocitem" href="#Transduction"><span>Transduction</span></a></li><li><a class="tocitem" href="#Transduction-points"><span>Transduction points</span></a></li></ul></li><li><a class="tocitem" href="../libinternal/">Internals</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li class="is-active"><a href>Data Transduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Data Transduction</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tecosaur/DataToolkit.jl/blob/master/docs/src/transducing.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Data-Transduction"><a class="docs-heading-anchor" href="#Data-Transduction">Data Transduction</a><a id="Data-Transduction-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Transduction" title="Permalink"></a></h1><h2 id="Transduction"><a class="docs-heading-anchor" href="#Transduction">Transduction</a><a id="Transduction-1"></a><a class="docs-heading-anchor-permalink" href="#Transduction" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="DataToolkitBase.DataTransducer" href="#DataToolkitBase.DataTransducer"><code>DataToolkitBase.DataTransducer</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">DataTransducer{context, func} &lt;: Function</code></pre><p>DataTransducers allow for composible, highly flexible modifications of data. They are inspired by elisp&#39;s advice system, namely the most versitile form — <code>:around</code> advice, and Clojure&#39;s transducers.</p><p>A <code>DataTransducer</code> is esentially a function wrapper, with a <code>priority::Int</code> attribute. The wrapped functions should be functions of the form:</p><pre><code class="nohighlight hljs">(post::Function, action::Function, args...; kargs...) -&gt;
  (post::Function, action::Function, args, kargs)</code></pre><p>To specify which transforms a DataTransducer should be applied to, ensure you add the relevant type parameters to your transducing function. In cases where the transducing function is not applicable, the DataTransducer will simply act as the identity function.</p><p>After all applicable <code>DataTransducer</code>s have been applied, <code>action(args...; kargs...) |&gt; post</code> is called to produce the final result.</p><p><strong>Constructors</strong></p><pre><code class="nohighlight hljs">DataTransducer(priority::Int, f::Function)
DataTransducer(f::Function) # priority is set to 1</code></pre><p><strong>Examples</strong></p><p>Should you want to log every time a DataSet is loaded, one could write the following DataTransducer:</p><pre><code class="nohighlight hljs"># TODO update
loggingtransducer = DataTransducer(
    function(loader::DataLoader, loadfn, (datain, outtype), kwargs)
        @info &quot;Loading $(loader.data.name)&quot;
        (loadfn, loader, (datain, outtype), kwargs)
    end)</code></pre><p>Should you wish to automatically commit each write:</p><pre><code class="nohighlight hljs"># TODO update
writecommittransducer = DataTransducer(
    function(writer::DataWriter{:filesystem}, writefn::typeof(write), (output, info)::Tuple{Any, Any}, kwargs)
        writecommit(writer, output::Any, info) =
          (writefn(writer, output, info); run(`git commit $output`))
        (writer, writefn, (output, info), kwargs)
    end)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tecosaur/DataToolkit.jl/blob/880d55d9750b01d541c485a171f2a6354cc35e34/src/types.jl#LL60-L111">source</a></section></article><h2 id="Transduction-points"><a class="docs-heading-anchor" href="#Transduction-points">Transduction points</a><a id="Transduction-points-1"></a><a class="docs-heading-anchor-permalink" href="#Transduction-points" title="Permalink"></a></h2><h3 id="Construction-of-data-sets-and-collections"><a class="docs-heading-anchor" href="#Construction-of-data-sets-and-collections">Construction of data sets and collections</a><a id="Construction-of-data-sets-and-collections-1"></a><a class="docs-heading-anchor-permalink" href="#Construction-of-data-sets-and-collections" title="Permalink"></a></h3><p>~DataCollection~​s, ~DataStore~​s, and ~AbstractDataTransformer~​s are transduced at two stages during construction:</p><ol><li>When calling <code>fromspec</code> on the <code>Dict</code> representation, at the start of</li></ol><p>construction</p><ol><li>At the end of construction, calling <code>identity</code> on the object</li></ol><p>The signatures of the transduced function calls are as follows:</p><pre><code class="language-julia hljs">fromspec(DataCollection, spec::Dict{String, Any}; path::Union{String, Nothing})
identity(DataCollection)</code></pre><pre><code class="language-julia hljs">fromspec(DataSet, collection::DataCollection, name::String, spec::Dict{String, Any})
identity(DataSet)</code></pre><pre><code class="language-julia hljs">fromspec(ADT::Type{&lt;:AbstractDataTransformer}, dataset::DataSet, spec::Dict{String, Any})
identity(ADT::AbstractDataTransformer)</code></pre><h3 id="Processing-identifiers"><a class="docs-heading-anchor" href="#Processing-identifiers">Processing identifiers</a><a id="Processing-identifiers-1"></a><a class="docs-heading-anchor-permalink" href="#Processing-identifiers" title="Permalink"></a></h3><p>Both the parsing of an <code>Identifier</code> from a string, and the serialisation of an <code>Identifier</code> to a string are transduced. Specifically, the following function calls:</p><pre><code class="language-julia hljs">parse(Identifier, spec::AbstractString, transduced=true)
string(ident::Identifier)</code></pre><h3 id="The-data-flow-arrows"><a class="docs-heading-anchor" href="#The-data-flow-arrows">The data flow arrows</a><a id="The-data-flow-arrows-1"></a><a class="docs-heading-anchor-permalink" href="#The-data-flow-arrows" title="Permalink"></a></h3><p>The reading, writing, and storage of data may all be transduced. Specifically, the following function calls:</p><pre><code class="language-julia hljs">load(loader::DataLoader, datahandle, as::Type)
storage(provider::DataStorage, as::Type; write::Bool)
writeinfo(writer::DataWriter, datahandle, info)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../libpublic/">« Public</a><a class="docs-footer-nextpage" href="../libinternal/">Internals »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.16 on <span class="colophon-date" title="Tuesday 19 April 2022 17:11">Tuesday 19 April 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
